"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[107],{9107:(Ht,w,c)=>{c.r(w),c.d(w,{AuthModule:()=>Dt});var d=c(9808),s=c(3075),T=c(520),u=c(4521),t=c(5e3),h=c(2313);const q=["root",""];function I(e,r){if(1&e&&t._UZ(0,"div",9),2&e){const o=t.oxw();t.Q6J("innerHTML",o.data,t.oJD)}}let O=(()=>{class e{constructor(o,n){this.sanitizer=o,this.http=n,this.today=new Date,this.show=!1}ngOnInit(){document.body.classList.add("bg-white")}ngOnDestroy(){document.body.classList.remove("bg-white")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(h.H7),t.Y36(T.eN))},e.\u0275cmp=t.Xpm({type:e,selectors:[["body","root",""]],attrs:q,decls:15,vars:1,consts:[[1,"d-flex","flex-column","flex-column-fluid","bgi-position-y-bottom","position-x-center","bgi-no-repeat","bgi-size-contain","bgi-attachment-fixed",2,"background-image","url('../../../assets/media/logistica.jpg')","background-size","100% 100%"],[1,"d-flex","flex-center","flex-column","flex-column-fluid","p-10","pb-lg-20"],["routerLink","/",1,"mb-12"],["width","450","height","115","src","./../../../assets/media/logos/LogoTsp.svg","alt","",1,"attachment-full","size-full","wp-image-2342"],["class","w-lg-500px bg-white rounded shadow-sm p-10 p-lg-15 mx-auto",3,"innerHTML",4,"ngIf"],[1,"w-lg-500px","bg-white","rounded","shadow-sm","p-10","p-lg-15","mx-auto"],[1,"d-flex","flex-center","flex-column-auto","p-10"],[1,"d-flex","align-items-center","fw-bold","fs-6"],[1,"text-muted","text-hover-primary","px-2","cursor-pointer"],[1,"w-lg-500px","bg-white","rounded","shadow-sm","p-10","p-lg-15","mx-auto",3,"innerHTML"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2),t._UZ(3,"img",3),t.qZA(),t.YNc(4,I,1,1,"div",4),t.TgZ(5,"div",5),t._UZ(6,"router-outlet"),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7)(9,"a",8),t._uU(10,"About"),t.qZA(),t.TgZ(11,"a",8),t._uU(12,"Contact"),t.qZA(),t.TgZ(13,"a",8),t._uU(14,"Contact Us"),t.qZA()()()()),2&o&&(t.xp6(4),t.Q6J("ngIf",n.show))},directives:[u.yS,d.O5,u.lC],styles:["[_nghost-%COMP%]{height:100%}"]}),e})();var _=c(7556),L=c(5226),v=c.n(L),P=c(989),E=c(8966),C=c(7238);function F(e,r){if(1&e&&(t.ynx(0),t.TgZ(1,"div",13)(2,"div",14),t._uU(3),t.qZA()(),t.BQk()),2&e){const o=t.oxw();t.xp6(3),t.hij(" ",o.message," ")}}const Z=function(e,r){return{"is-invalid":e,"is-valid":r}},U=function(e){return{validation:"required",message:"El Email  es requerido",control:e}},Q=function(e){return{validation:"email",message:"El Email no es v\xe1lido",control:e}},J=function(e){return{validation:"minLength",message:"El Email debe tener al menos 3 s\xedmbolos",control:e}},N=function(e){return{validation:"maxLength",message:"El Email debe tener un maximo 360 s\xedmbolos",control:e}};function Y(e,r){if(1&e&&(t.TgZ(0,"div",15)(1,"label",16),t._uU(2,"Email"),t.qZA(),t._UZ(3,"input",17),t.GkF(4,18)(5,18)(6,18)(7,18),t.qZA()),2&e){const o=t.oxw(),n=t.MAs(28);t.xp6(3),t.Q6J("ngClass",t.WLB(9,Z,o.form.controls.email.invalid,o.form.controls.email.valid)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(12,U,o.form.controls.email)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(14,Q,o.form.controls.email)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(16,J,o.form.controls.email)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(18,N,o.form.controls.email))}}const M=function(e){return{validation:"required",message:"La contrase\xf1a es requerida",control:e}},R=function(e){return{validation:"minlength",message:"La Contrase\xf1a debe tener al menos 3 s\xedmbolos",control:e}},V=function(e){return{validation:"maxLength",message:"La Contrase\xf1a debe tener un m\xe1ximo de 100 s\xedmbolos",control:e}};function D(e,r){if(1&e&&(t.TgZ(0,"div",15)(1,"div",19)(2,"div",20)(3,"label",21),t._uU(4,"Contrase\xf1a"),t.qZA(),t.TgZ(5,"a",22),t._uU(6," Olvid\xe9 mi contrase\xf1a "),t.qZA()()(),t._UZ(7,"input",23),t.GkF(8,18)(9,18)(10,18),t.qZA()),2&e){const o=t.oxw(),n=t.MAs(28);t.xp6(5),t.Udp("margin-left","5px"),t.xp6(2),t.Q6J("ngClass",t.WLB(9,Z,o.form.controls.password.invalid,o.form.controls.password.valid)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(12,M,o.form.controls.password)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(14,R,o.form.controls.password)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(16,V,o.form.controls.password))}}function H(e,r){if(1&e&&(t.TgZ(0,"div",15)(1,"h5"),t._uU(2,"Para continuar debes habilitar la doble autentificacion, si aun no la tienes descarga la app "),t.TgZ(3,"a",24),t._uU(4,"Autenticador de Google"),t.qZA(),t._uU(5,", escanea el codigo Qr e ingresa el codigo generado por la aplicacion "),t.qZA(),t._UZ(6,"div",25),t.qZA()),2&e){const o=t.oxw();t.xp6(6),t.Q6J("innerHTML",o.qrImage,t.oJD)}}function K(e,r){1&e&&(t.TgZ(0,"div",15)(1,"label",26),t._uU(2,"Codigo"),t.qZA(),t._UZ(3,"input",27),t.qZA())}function j(e,r){1&e&&(t.ynx(0),t.TgZ(1,"span",28),t._uU(2," Iniciando sesi\xf3n "),t._UZ(3,"span",29),t.qZA(),t.BQk()),2&e&&(t.xp6(1),t.Udp("display","block"))}function z(e,r){1&e&&(t.ynx(0),t.TgZ(1,"span",30),t._uU(2,"Continuar"),t.qZA(),t.BQk())}function $(e,r){1&e&&(t.ynx(0),t.TgZ(1,"div",31),t._UZ(2,"div",32),t.qZA(),t.BQk())}function W(e,r){if(1&e&&(t.ynx(0),t.TgZ(1,"div",33)(2,"span",34),t._uU(3),t.qZA()(),t.BQk()),2&e){const o=t.oxw().message;t.xp6(3),t.hij(" ",o," ")}}function G(e,r){if(1&e&&t.YNc(0,W,4,1,"ng-container",5),2&e){const o=r.control;t.Q6J("ngIf",o.hasError(r.validation)&&(o.dirty||o.touched))}}let X=(()=>{class e{constructor(o,n,i,a,l,m,p){this.fb=o,this.authService=n,this.route=i,this.router=a,this.cdr=l,this.sanitizer=m,this.dialog=p,this.Steep=1,this.unsubscribe=[],this.isLoading$=this.authService.isLoading$,this.authService.isLoggedIn()&&this.router.navigate(["/"])}ngOnInit(){this.initForm(),this.returnUrl=this.route.snapshot.queryParams["returnUrl".toString()]||"/"}get f(){return this.form.controls}initForm(){this.form=this.fb.group({email:[,s.kI.compose([s.kI.required,s.kI.email,s.kI.minLength(3),s.kI.maxLength(320)])],password:["",s.kI.compose([s.kI.required,s.kI.minLength(3),s.kI.maxLength(100)])],code:["",s.kI.compose([s.kI.minLength(6),s.kI.maxLength(6)])],nitcli:[""]})}submit(){if(this.hasError=!1,this.cdr.detectChanges(),1==this.Steep){this.form.value.email=this.form.value.email.toString().toUpperCase();const o=this.authService.preLogin(this.form.value).subscribe({next:n=>{var i,a,l,m,p,x;n.data.user&&(this.user=null===(i=n.data)||void 0===i?void 0:i.user,this.external=null===(l=null===(a=n.data)||void 0===a?void 0:a.webusr)||void 0===l?void 0:l.vus_tipusr,this.active=null===(p=null===(m=n.data)||void 0===m?void 0:m.user)||void 0===p?void 0:p.active,this.qrImage=this.sanitizer.bypassSecurityTrustHtml(null===(x=n.data)||void 0===x?void 0:x.qr_code),this.Steep=2,this.form.controls.code.setValidators(s.kI.required),this.cdr.detectChanges()),console.log(n)},error:n=>{var i,a,l,m;this.message=(null===(a=null===(i=n.error)||void 0===i?void 0:i.data)||void 0===a?void 0:a.message)?null===(m=null===(l=n.error)||void 0===l?void 0:l.data)||void 0===m?void 0:m.message:"Error en inicio de session",this.hasError=!0,console.log(n)}});this.unsubscribe.push(o)}if(2==this.Steep)if("3"===this.external&&"0"===this.active)v().fire({title:"VALIDACI\xd3N DE USUARIO EXTERNO",inputLabel:"Digite e nit de su empresa:",input:"text",confirmButtonText:"Validar",allowEscapeKey:!1,allowOutsideClick:!1,preConfirm:o=>null!==o&&(""===o?(v().showValidationMessage("Debe digitar el nit"),!1):void 0)}).then(o=>{if(o.isConfirmed){this.form.value.email=this.form.value.email.toString().toUpperCase(),this.form.value.nitcli=o.value;const n=this.authService.login(this.form.value).subscribe({next:i=>{i&&this.router.navigate([this.returnUrl])},error:i=>{var a,l,m,p;console.log(i),this.message=(null===(l=null===(a=i.error)||void 0===a?void 0:a.data)||void 0===l?void 0:l.message)?null===(p=null===(m=i.error)||void 0===m?void 0:m.data)||void 0===p?void 0:p.message:"Error en inicio de session",this.hasError=!0}});this.unsubscribe.push(n)}else v().fire("Es necesario digitar el nit de su empresa","","info").then(n=>{this.authService.logout().subscribe(i=>{document.location.reload()})})});else{this.form.value.email=this.form.value.email.toString().toUpperCase();const o=this.authService.login(this.form.value).subscribe({next:n=>{console.log(n),n&&this.router.navigate([this.returnUrl])},error:n=>{var i,a,l,m;this.message=(null===(a=null===(i=n.error)||void 0===i?void 0:i.data)||void 0===a?void 0:a.message)?null===(m=null===(l=n.error)||void 0===l?void 0:l.data)||void 0===m?void 0:m.message:"Error en inicio de session",this.hasError=!0,console.log(n)}});this.unsubscribe.push(o)}}getQr(){this.authService.getQr().subscribe(o=>{(new DOMParser).parseFromString(o.data,"text/xml"),this.qrImage=this.sanitizer.bypassSecurityTrustHtml(o.data),console.log(this.qrImage),this.cdr.detectChanges()})}ngOnDestroy(){this.unsubscribe.forEach(o=>o.unsubscribe())}openSupportAppDownload(){this.dialog.open(P.M,{width:"70vw",height:"70vh"})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.qu),t.Y36(_.e),t.Y36(u.gz),t.Y36(u.F0),t.Y36(t.sBO),t.Y36(h.H7),t.Y36(E.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:29,vars:18,consts:[["matTooltip","App de soporte remoto",1,"button-img",3,"click"],["src","/assets/media/customer-support.png",1,"button-img"],["novalidate","novalidate","id","kt_login_signin_form",1,"form","w-100","position-relative",3,"formGroup","ngSubmit"],[1,"text-center","mb-10"],[1,"text-dark","mb-3"],[4,"ngIf"],["class","fv-row mb-10",4,"ngIf"],[1,"text-center"],["type","submit","id","kt_sign_in_submit",1,"btn","btn-lg","btn-primary","w-100","mb-5",3,"disabled"],[1,"text-gray-400","fw-bold","fs-4"],["routerLink","/auth/registration","id","kt_login_signup",1,"link-primary","fw-bolder"],["routerLink","/auth/pre-registration","id","kt_login_signup",1,"link-primary"],["formError",""],[1,"mb-lg-15","alert","alert-danger"],[1,"alert-text","font-weight-bold"],[1,"fv-row","mb-10"],[1,"form-label","fs-6","fw-bolder","text-dark"],["type","email","name","email","formControlName","email","autocomplete","off",1,"form-control","form-control-lg","form-control-solid","uppercase",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-flex","justify-content-between","mt-n5"],[1,"d-flex","flex-stack","mb-2"],[1,"form-label","fw-bolder","text-dark","fs-6","mb-0"],["routerLink","/auth/forgot-password","id","kt_login_forgot",1,"link-primary","fs-6","fw-bolder"],["type","password","name","password","autocomplete","off","formControlName","password",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],["href","https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=es_CO&gl=US","target","_blank"],[2,"min-width","200px",3,"innerHTML"],[1,"form-label","fw-bolder","text-gray-900","fs-6"],["type","email","formControlName","code","placeholder","Codigo","name","codigo","autocomplete","off",1,"form-control","form-control-lg","form-control-solid"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"indicator-label"],[1,"position-absolute","fixed-top","d-flex","justify-content-center","align-items-center","h-100","w-100",2,"background-color","rgba(206, 206, 206, 0.2)"],["role","status",1,"spinner-border",2,"width","5rem","height","5rem"],[1,"fv-plugins-message-container"],["role","alert"]],template:function(o,n){1&o&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.openSupportAppDownload()}),t._UZ(1,"img",1),t.qZA(),t.TgZ(2,"form",2),t.NdJ("ngSubmit",function(){return n.submit()}),t.TgZ(3,"div",3)(4,"h1",4),t._uU(5,"Iniciar sesi\xf3n"),t.qZA()(),t.YNc(6,F,4,1,"ng-container",5),t.YNc(7,Y,8,20,"div",6),t.YNc(8,D,11,18,"div",6),t.YNc(9,H,7,1,"div",6),t.YNc(10,K,4,0,"div",6),t.TgZ(11,"div",7)(12,"button",8),t.ALo(13,"async"),t.YNc(14,j,4,2,"ng-container",5),t.ALo(15,"async"),t.YNc(16,z,3,0,"ng-container",5),t.ALo(17,"async"),t.qZA()(),t.TgZ(18,"div",3)(19,"div",9)(20,"a",10),t._uU(21,"Registrarse"),t.qZA()(),t.TgZ(22,"div",9)(23,"a",11),t._uU(24,"Pre-registro"),t.qZA()()(),t.YNc(25,$,3,0,"ng-container",5),t.ALo(26,"async"),t.qZA(),t.YNc(27,G,1,1,"ng-template",null,12,t.W1O)),2&o&&(t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(4),t.Q6J("ngIf",n.hasError),t.xp6(1),t.Q6J("ngIf",1==n.Steep),t.xp6(1),t.Q6J("ngIf",1==n.Steep),t.xp6(1),t.Q6J("ngIf",2==n.Steep&&0==(null==n.user?null:n.user.google2fa_enable)),t.xp6(1),t.Q6J("ngIf",2==n.Steep),t.xp6(2),t.Q6J("disabled",n.form.invalid||t.lcZ(13,10,n.isLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,12,n.isLoading$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(17,14,n.isLoading$)),t.xp6(9),t.Q6J("ngIf",t.lcZ(26,16,n.isLoading$)))},directives:[C.gM,s._Y,s.JL,s.sg,d.O5,s.Fj,s.JJ,s.u,d.mk,d.tP,u.yS],pipes:[d.Ov],styles:["[_nghost-%COMP%]{width:100%}@media (min-width: 992px){[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]{width:100%;max-width:450px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}}.uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.button-img[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;height:60px;width:60px;border-radius:20px}"]}),e})();var tt=c(5909),b=c(590);function et(e,r){1&e&&(t.TgZ(0,"div",10),t._uU(1," Introduce tu correo para restablecer tu Contrase\xf1a "),t.qZA())}function ot(e,r){1&e&&(t.TgZ(0,"div",10),t._uU(1," Solicitud Satifactoria "),t.qZA())}function nt(e,r){if(1&e&&(t.ynx(0),t.TgZ(1,"div",11)(2,"div",12),t._uU(3),t.qZA()(),t.BQk()),2&e){const o=t.oxw();t.xp6(3),t.Oqu(o.errorState.message)}}function rt(e,r){if(1&e&&(t.ynx(0),t.TgZ(1,"div",13)(2,"div",14),t._uU(3),t.qZA()(),t.BQk()),2&e){const o=t.oxw();t.xp6(3),t.Oqu(o.errorState.message)}}const st=function(e,r){return{"is-invalid":e,"is-valid":r}},it=function(e){return{validation:"required",message:"El Email  es requerido",control:e}},at=function(e){return{validation:"email",message:"El Email no es v\xe1lido",control:e}},lt=function(e){return{validation:"minLength",message:"El Email debe tener al menos 3 s\xedmbolos",control:e}},ct=function(e){return{validation:"maxLength",message:"El Email debe tener un maximo 360 s\xedmbolos",control:e}};function mt(e,r){if(1&e&&(t.TgZ(0,"div",15)(1,"label",16),t._uU(2,"Email"),t.qZA(),t._UZ(3,"input",17),t.GkF(4,18)(5,18)(6,18)(7,18),t.qZA()),2&e){const o=t.oxw(),n=t.MAs(16);t.xp6(3),t.Q6J("ngClass",t.WLB(9,st,o.forgotPasswordForm.controls.email.invalid,o.forgotPasswordForm.controls.email.valid)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(12,it,o.forgotPasswordForm.controls.email)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(14,at,o.forgotPasswordForm.controls.email)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(16,lt,o.forgotPasswordForm.controls.email)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(18,ct,o.forgotPasswordForm.controls.email))}}function dt(e,r){1&e&&(t.TgZ(0,"span",23),t._uU(1,"Enviar"),t.qZA())}function ut(e,r){1&e&&(t.ynx(0),t.TgZ(1,"span",24),t._uU(2," Por favor espera "),t._UZ(3,"span",25),t.qZA(),t.BQk()),2&e&&(t.xp6(1),t.Udp("display","block"))}function pt(e,r){if(1&e&&(t.TgZ(0,"div",19)(1,"a",20),t._uU(2," Cancelar "),t.qZA(),t.TgZ(3,"button",21),t.ALo(4,"async"),t.YNc(5,dt,2,0,"span",22),t.ALo(6,"async"),t.YNc(7,ut,4,2,"ng-container",5),t.ALo(8,"async"),t.qZA()()),2&e){const o=t.oxw();t.xp6(3),t.Q6J("disabled",o.forgotPasswordForm.invalid||t.lcZ(4,3,o.isLoading$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(6,5,o.isLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,7,o.isLoading$))}}function gt(e,r){1&e&&(t.TgZ(0,"div",19)(1,"a",20),t._uU(2," Continuar "),t.qZA()())}function ft(e,r){1&e&&(t.ynx(0),t.TgZ(1,"div",26),t._UZ(2,"div",27),t.qZA(),t.BQk())}function _t(e,r){if(1&e&&(t.ynx(0),t.TgZ(1,"div",28)(2,"div",29)(3,"span",30),t._uU(4),t.qZA()()(),t.BQk()),2&e){const o=t.oxw().message;t.xp6(4),t.Oqu(o)}}function ht(e,r){if(1&e&&t.YNc(0,_t,5,1,"ng-container",5),2&e){const o=r.control;t.Q6J("ngIf",o.hasError(r.validation)&&(o.dirty||o.touched))}}var g=(()=>{return(e=g||(g={}))[e.NotSubmitted=0]="NotSubmitted",e[e.HasError=1]="HasError",e[e.NoError=2]="NoError",g;var e})();let vt=(()=>{class e{constructor(o,n){this.fb=o,this.authService=n,this.errorState={state:g.NotSubmitted,message:""},this.errorStates=g,this.unsubscribe=[],this.isLoading$=this.authService.isLoading$}ngOnInit(){this.initForm()}get f(){return this.forgotPasswordForm.controls}initForm(){this.forgotPasswordForm=this.fb.group({email:["",s.kI.compose([s.kI.required,s.kI.email,s.kI.minLength(3),s.kI.maxLength(320)])]})}submit(){this.errorState=g.NotSubmitted;const n=this.authService.password_reset_request(this.f.email.value.toUpperCase()).pipe((0,b.P)()).subscribe(i=>{console.log("CORREO ENVIADO",i),this.errorState={state:g.NoError,message:i.data.message}},i=>{this.errorState={state:g.HasError,message:"Hubo un error con la solicitud"}});this.unsubscribe.push(n)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.qu),t.Y36(_.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-forgot-password"]],decls:17,vars:11,consts:[["novalidate","novalidate","id","kt_login_password_reset_form",1,"form","w-100","fv-plugins-bootstrap5","fv-plugins-framework","position-relative",3,"formGroup","ngSubmit"],[1,"text-center","mb-10"],[1,"text-dark","mb-3"],["class","text-gray-400 fw-bold fs-4",4,"ngIf","ngIfElse"],["enviado",""],[4,"ngIf"],["class","fv-row mb-10",4,"ngIf"],["class","d-flex flex-wrap justify-content-center pb-lg-0",4,"ngIf","ngIfElse"],["NoError",""],["formError",""],[1,"text-gray-400","fw-bold","fs-4"],[1,"mb-lg-15","alert","alert-danger"],[1,"alert-text","font-weight-bold"],[1,"mb-10","bg-light-info","p-8","rounded"],[1,"text-info"],[1,"fv-row","mb-10"],[1,"form-label","fw-bolder","text-gray-900","fs-6"],["type","email","formControlName","email","placeholder","Email","name","email","autocomplete","off",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-flex","flex-wrap","justify-content-center","pb-lg-0"],["routerLink","/auth/login","id","kt_login_password_reset_form_cancel_button",1,"btn","btn-lg","btn-light-primary","fw-bolder"],["type","submit","id","kt_password_reset_submit",1,"btn","btn-lg","btn-primary","fw-bolder","me-4",3,"disabled"],["class","indicator-label",4,"ngIf"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"position-absolute","fixed-top","d-flex","justify-content-center","align-items-center","h-100","w-100",2,"background-color","rgba(206, 206, 206, 0.2)"],["role","status",1,"spinner-border",2,"width","5rem","height","5rem"],[1,"fv-plugins-message-container"],[1,"fv-help-block"],["role","alert"]],template:function(o,n){if(1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.submit()}),t.TgZ(1,"div",1)(2,"h1",2),t._uU(3,"Recuperar Contrase\xf1a"),t.qZA(),t.YNc(4,et,2,0,"div",3),t.YNc(5,ot,2,0,"ng-template",null,4,t.W1O),t.qZA(),t.YNc(7,nt,4,1,"ng-container",5),t.YNc(8,rt,4,1,"ng-container",5),t.YNc(9,mt,8,20,"div",6),t.YNc(10,pt,9,9,"div",7),t.YNc(11,gt,3,0,"ng-template",null,8,t.W1O),t.YNc(13,ft,3,0,"ng-container",5),t.ALo(14,"async"),t.qZA(),t.YNc(15,ht,1,1,"ng-template",null,9,t.W1O)),2&o){const i=t.MAs(6),a=t.MAs(12);t.Q6J("formGroup",n.forgotPasswordForm),t.xp6(4),t.Q6J("ngIf",n.errorState.state!==n.errorStates.NoError)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",n.errorState.state===n.errorStates.HasError),t.xp6(1),t.Q6J("ngIf",n.errorState.state===n.errorStates.NoError),t.xp6(1),t.Q6J("ngIf",n.errorState.state!==n.errorStates.NoError),t.xp6(1),t.Q6J("ngIf",n.errorState.state!==n.errorStates.NoError)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",t.lcZ(14,9,n.isLoading$))}},directives:[s._Y,s.JL,s.sg,d.O5,s.Fj,s.JJ,s.u,d.mk,d.tP,u.yS],pipes:[d.Ov],styles:["[_nghost-%COMP%]{width:100%}@media (min-width: 992px){[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]{width:100%;max-width:450px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}}"]}),e})(),bt=(()=>{class e{constructor(o){this.authService=o,this.authService.logout()}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-logout"]],decls:2,vars:0,template:function(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"logout works!"),t.qZA())},styles:[""]}),e})();function xt(e,r){1&e&&(t.TgZ(0,"div",10),t._uU(1," Por favor introduce una contrase\xf1a nueva "),t.qZA())}function wt(e,r){1&e&&(t.TgZ(0,"div",10),t._uU(1," Restablecimiento de contrase\xf1a satisfactoria "),t.qZA())}function Tt(e,r){if(1&e&&(t.ynx(0),t.TgZ(1,"div",11)(2,"div",12),t._uU(3),t.qZA()(),t.BQk()),2&e){const o=t.oxw();t.xp6(3),t.Oqu(o.errorState.message)}}function Ct(e,r){if(1&e&&(t.ynx(0),t.TgZ(1,"div",13)(2,"div",14),t._uU(3),t.qZA()(),t.BQk()),2&e){const o=t.oxw();t.xp6(3),t.Oqu(o.errorState.message)}}const A=function(e,r){return{"is-invalid":e,"is-valid":r}},y=function(e){return{validation:"required",message:"La contrase\xf1a es requerida",control:e}},Zt=function(e){return{validation:"password",message:"La contrase\xf1a no es v\xe1lida",control:e}},k=function(e){return{validation:"minLength",message:"La Contrase\xf1a debe tener al menos 3 s\xedmbolos",control:e}},S=function(e){return{validation:"maxLength",message:"La Contrase\xf1a debe tener un m\xe1ximo de 100 s\xedmbolos",control:e}};function yt(e,r){if(1&e&&(t.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"label",18),t._uU(4,"Nueva Contrase\xf1a"),t.qZA()()(),t._UZ(5,"input",19),t.GkF(6,20)(7,20)(8,20)(9,20),t.qZA()),2&e){const o=t.oxw(),n=t.MAs(17);t.xp6(5),t.Q6J("ngClass",t.WLB(9,A,o.resetPasswordForm.controls.password.invalid,o.resetPasswordForm.controls.password.valid)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(12,y,o.resetPasswordForm.controls.password)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(14,Zt,o.resetPasswordForm.controls.password)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(16,k,o.resetPasswordForm.controls.password)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(18,S,o.resetPasswordForm.controls.password))}}const kt=function(e){return{validation:"password_confirmation",message:"La contrase\xf1a no es v\xe1lida",control:e}};function St(e,r){if(1&e&&(t.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"label",18),t._uU(4,"Confirmar Contrase\xf1a"),t.qZA()()(),t._UZ(5,"input",21),t.GkF(6,20)(7,20)(8,20)(9,20),t.qZA()),2&e){const o=t.oxw(),n=t.MAs(17);t.xp6(5),t.Q6J("ngClass",t.WLB(9,A,o.resetPasswordForm.controls.password_confirmation.invalid,o.resetPasswordForm.controls.password_confirmation.valid)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(12,y,o.resetPasswordForm.controls.password_confirmation)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(14,kt,o.resetPasswordForm.controls.password_confirmation)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(16,k,o.resetPasswordForm.controls.password_confirmation)),t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(18,S,o.resetPasswordForm.controls.password_confirmation))}}function qt(e,r){1&e&&(t.TgZ(0,"span",26),t._uU(1,"Enviar"),t.qZA())}function It(e,r){1&e&&(t.ynx(0),t.TgZ(1,"span",27),t._uU(2," Por favor espera "),t._UZ(3,"span",28),t.qZA(),t.BQk()),2&e&&(t.xp6(1),t.Udp("display","block"))}function Ot(e,r){if(1&e&&(t.TgZ(0,"div",22)(1,"a",23),t._uU(2," Cancelar "),t.qZA(),t.TgZ(3,"button",24),t.YNc(4,qt,2,0,"span",25),t.ALo(5,"async"),t.YNc(6,It,4,2,"ng-container",5),t.ALo(7,"async"),t.qZA()()),2&e){const o=t.oxw();t.xp6(4),t.Q6J("ngIf",!t.lcZ(5,2,o.isLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(7,4,o.isLoading$))}}function Lt(e,r){1&e&&(t.ynx(0),t.TgZ(1,"div",29),t._UZ(2,"div",30),t.qZA(),t.BQk())}function Pt(e,r){1&e&&(t.TgZ(0,"div",22)(1,"a",23),t._uU(2," Continuar "),t.qZA()())}function Et(e,r){if(1&e&&(t.ynx(0),t.TgZ(1,"div",31)(2,"div",32)(3,"span",33),t._uU(4),t.qZA()()(),t.BQk()),2&e){const o=t.oxw().message;t.xp6(4),t.Oqu(o)}}function Ft(e,r){if(1&e&&t.YNc(0,Et,5,1,"ng-container",5),2&e){const o=r.control;t.Q6J("ngIf",o.hasError(r.validation)&&(o.dirty||o.touched))}}var f=(()=>{return(e=f||(f={}))[e.NotSubmitted=0]="NotSubmitted",e[e.HasError=1]="HasError",e[e.NoError=2]="NoError",f;var e})();let Ut=(()=>{class e{constructor(o,n,i){this.fb=o,this.authService=n,this.activatedRoute=i,this.errorState={state:f.NotSubmitted,message:""},this.errorStates=f,this.unsubscribe=[],this.isLoading$=this.authService.isLoading$}ngOnInit(){this.initForm(),this.activatedRoute.params.subscribe(o=>{this.findByToken(o.token)})}initForm(){this.resetPasswordForm=this.fb.group({password:["",s.kI.compose([s.kI.required,s.kI.email,s.kI.minLength(3),s.kI.maxLength(320)])],password_confirmation:["",s.kI.compose([s.kI.required,s.kI.email,s.kI.minLength(3),s.kI.maxLength(320)])],user_id:[null],token:[null]})}submit(){this.errorState=f.NotSubmitted;const o=this.authService.reset_password(this.resetPasswordForm.value).pipe((0,b.P)()).subscribe(n=>{console.log("LA RESPUESTA",n),this.errorState={state:f.NoError,message:n.data.message}},n=>{this.errorState={state:f.HasError,message:"Error al intentar restablecer la contrase\xf1a"}});this.unsubscribe.push(o)}findByToken(o){const n=this.authService.RESET_PASSWORD_FIND(o).pipe((0,b.P)()).subscribe(i=>{this.resetPasswordForm.controls.user_id.setValue(i.data.user_id),this.resetPasswordForm.controls.token.setValue(i.data.token),console.log("USUARIO",i),console.log(this.resetPasswordForm.value)});this.unsubscribe.push(n)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.qu),t.Y36(_.e),t.Y36(u.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-reset-password"]],decls:18,vars:12,consts:[["novalidate","novalidate","id","kt_login_password_reset_form",1,"form","w-100","fv-plugins-bootstrap5","fv-plugins-framework","position-relative",3,"formGroup","ngSubmit"],[1,"text-center","mb-10"],[1,"text-dark","mb-3"],["class","text-gray-400 fw-bold fs-4",4,"ngIf","ngIfElse"],["enviado",""],[4,"ngIf"],["class","fv-row mb-10",4,"ngIf"],["class","d-flex flex-wrap justify-content-center pb-lg-0",4,"ngIf","ngIfElse"],["NoError",""],["formError",""],[1,"text-gray-400","fw-bold","fs-4"],[1,"mb-lg-15","alert","alert-danger"],[1,"alert-text","font-weight-bold"],[1,"mb-10","bg-light-info","p-8","rounded"],[1,"text-info"],[1,"fv-row","mb-10"],[1,"d-flex","justify-content-between","mt-n5"],[1,"d-flex","flex-stack","mb-2"],[1,"form-label","fw-bolder","text-dark","fs-6","mb-0"],["type","password","name","password","autocomplete","off","formControlName","password",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","password","name","password","autocomplete","off","formControlName","password_confirmation",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],[1,"d-flex","flex-wrap","justify-content-center","pb-lg-0"],["routerLink","/auth/login","id","kt_login_password_reset_form_cancel_button",1,"btn","btn-lg","btn-light-primary","fw-bolder"],["type","submit","id","kt_password_reset_submit",1,"btn","btn-lg","btn-primary","fw-bolder","me-4"],["class","indicator-label",4,"ngIf"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"position-absolute","fixed-top","d-flex","justify-content-center","align-items-center","h-100","w-100",2,"background-color","rgba(206, 206, 206, 0.2)"],["role","status",1,"spinner-border",2,"width","5rem","height","5rem"],[1,"fv-plugins-message-container"],[1,"fv-help-block"],["role","alert"]],template:function(o,n){if(1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.submit()}),t.TgZ(1,"div",1)(2,"h1",2),t._uU(3,"Restablecer Contrase\xf1a"),t.qZA(),t.YNc(4,xt,2,0,"div",3),t.YNc(5,wt,2,0,"ng-template",null,4,t.W1O),t.qZA(),t.YNc(7,Tt,4,1,"ng-container",5),t.YNc(8,Ct,4,1,"ng-container",5),t.YNc(9,yt,10,20,"div",6),t.YNc(10,St,10,20,"div",6),t.YNc(11,Ot,8,6,"div",7),t.YNc(12,Lt,3,0,"ng-container",5),t.ALo(13,"async"),t.YNc(14,Pt,3,0,"ng-template",null,8,t.W1O),t.qZA(),t.YNc(16,Ft,1,1,"ng-template",null,9,t.W1O)),2&o){const i=t.MAs(6),a=t.MAs(15);t.Q6J("formGroup",n.resetPasswordForm),t.xp6(4),t.Q6J("ngIf",n.errorState.state!==n.errorStates.NoError)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",n.errorState.state===n.errorStates.HasError),t.xp6(1),t.Q6J("ngIf",n.errorState.state===n.errorStates.NoError),t.xp6(1),t.Q6J("ngIf",n.errorState.state!==n.errorStates.NoError),t.xp6(1),t.Q6J("ngIf",n.errorState.state!==n.errorStates.NoError),t.xp6(1),t.Q6J("ngIf",n.errorState.state!==n.errorStates.NoError)("ngIfElse",a),t.xp6(1),t.Q6J("ngIf",t.lcZ(13,10,n.isLoading$))}},directives:[s._Y,s.JL,s.sg,d.O5,s.Fj,s.JJ,s.u,d.mk,d.tP,u.yS],pipes:[d.Ov],styles:[""]}),e})();var Qt=c(6996);function Jt(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"div",5)(1,"h3",6),t._uU(2," Sus email ha sido verificado, lo invitamos a ingresar y seguir configurando su cuenta "),t.qZA(),t.TgZ(3,"button",7),t.NdJ("click",function(){return t.CHM(o),t.oxw().goToBack()}),t.TgZ(4,"span",8),t._uU(5,"Ingresar ahora"),t.qZA()()()}}let Nt=(()=>{class e{constructor(o,n,i,a,l){this.authService=o,this.activatedRoute=n,this.helper=i,this.router=a,this.cdr=l,this.Steep=1}ngOnInit(){console.log("llego"),this.sub=this.activatedRoute.params.subscribe(o=>{o.token&&this.findAndActivate(o.token)})}findAndActivate(o){this.authService.findAndActivate(o).subscribe(n=>{this.Steep=2,this.cdr.detectChanges(),this.helper.onSuccess("Genial, tu cuenta ha sido verificada, ya puedes acceder a mas contenido")},n=>{this.helper.onError("Nos confundimos, Al parecer ya se ha usado este link, si crees que es un error contacta al administrador"),this.router.navigate(["/auth/login"])})}goToBack(){this.router.navigate(["/auth/login"])}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_.e),t.Y36(u.gz),t.Y36(Qt.W),t.Y36(u.F0),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-activate"]],decls:7,vars:1,consts:[[1,"form","w-100","fv-plugins-bootstrap5","fv-plugins-framework"],[1,"text-center","mb-3"],[1,"text-dark","mb-2"],[1,"text-gray-400","fw-bold","fs-4"],["class","text-center",4,"ngIf"],[1,"text-center"],[1,"mb-5"],[1,"btn","btn-lg","btn-primary","w-100","mb-5",3,"click"],[1,"indicator-label"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Activacion de cuenta"),t.qZA(),t.TgZ(4,"div",3),t._uU(5,"Verificacion de Email"),t.qZA()(),t.YNc(6,Jt,6,0,"div",4),t.qZA()),2&o&&(t.xp6(6),t.Q6J("ngIf",2==n.Steep))},directives:[d.O5],styles:[""]}),e})(),Yt=(()=>{class e{constructor(o,n,i,a,l){this.auth=o,this.cdr=n,this.sanitizer=i,this.router=a,this.fb=l,this.form=this.fb.group({code:["",s.kI.required]})}ngOnInit(){this.getQr()}enable(){this.form.invalid||this.auth.enable2fa(this.form.value).subscribe(o=>{console.log(o),this.router.navigate(["/home"])})}getQr(){this.auth.getQr().subscribe(o=>{(new DOMParser).parseFromString(o.data,"text/xml"),this.image=this.sanitizer.bypassSecurityTrustHtml(o.data),console.log(this.image),this.cdr.detectChanges()})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_.e),t.Y36(t.sBO),t.Y36(h.H7),t.Y36(u.F0),t.Y36(s.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-qr-asotiation"]],decls:9,vars:1,consts:[[1,"row"],[1,"col-6"],[3,"formGroup"],[1,"fv-row","mb-10"],[1,"form-label","fw-bolder","text-gray-900","fs-6"],["type","email","formControlName","code","placeholder","Codigo","name","codigo","autocomplete","off",1,"form-control","form-control-lg","form-control-solid"],["id","kt_password_reset_submit",1,"btn","btn-lg","btn-primary","fw-bolder","me-4",2,"margin","0","position","absolute","top","50%","-ms-transform","translateY(-50%)","transform","translateY(-50%)",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"label",4),t._uU(5,"Codigo"),t.qZA(),t._UZ(6,"input",5),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){return n.enable()}),t._uU(8," Codigo Escaneado "),t.qZA()()()()),2&o&&(t.xp6(2),t.Q6J("formGroup",n.form))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u],styles:[""]}),e})();const Rt=[{path:"",component:O,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:X,data:{returnUrl:window.location.pathname}},{path:"registration",component:tt.w},{path:"pre-registration",component:(()=>{class e{constructor(o){this.router=o}ngOnInit(){}goToBack(){console.log("back"),this.router.navigate(["/"])}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-pre-registration"]],decls:6,vars:0,consts:[["width","640px","height","480px","src","https://forms.office.com/Pages/ResponsePage.aspx?id=krCMiXXBikacvEE5jkrTLEEdJKrti-pDvgYc7tk0NbBUNDc2Q1JHWTlEWlNBMEgyUjk2VU5aNUkzNi4u&embed=true","frameborder","0","marginwidth","0","marginheight","0","allowfullscreen","","webkitallowfullscreen","","mozallowfullscreen","","msallowfullscreen","",2,"border","none","max-width","100%","max-height","100vh"],[1,"text-center"],[1,"btn","btn-lg","btn-primary","w-100","mb-5",3,"click"],[1,"indicator-label"]],template:function(o,n){1&o&&(t.TgZ(0,"iframe",0),t._uU(1,"\xa0"),t.qZA(),t.TgZ(2,"div",1)(3,"button",2),t.NdJ("click",function(){return n.goToBack()}),t.TgZ(4,"span",3),t._uU(5,"Ir Al Inicio"),t.qZA()()())},styles:[""]}),e})()},{path:"forgot-password",component:vt},{path:"reset/:token",component:Ut},{path:"activate/:token",component:Nt},{path:"twofactoryactivate",component:Yt},{path:"logout",component:bt},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",redirectTo:"login",pathMatch:"full"}]}];let Bt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.Bz.forChild(Rt)],u.Bz]}),e})();var Vt=c(7292);let Dt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,Vt.q,Bt,s.u5,s.UX,T.JF,C.AV]]}),e})()}}]);